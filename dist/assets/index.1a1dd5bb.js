var Hn=Object.defineProperty,Yn=Object.defineProperties;var Gn=Object.getOwnPropertyDescriptors;var Ze=Object.getOwnPropertySymbols;var ar=Object.prototype.hasOwnProperty,cr=Object.prototype.propertyIsEnumerable;var or=(r,e,t)=>e in r?Hn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ee=(r,e)=>{for(var t in e||(e={}))ar.call(e,t)&&or(r,t,e[t]);if(Ze)for(var t of Ze(e))cr.call(e,t)&&or(r,t,e[t]);return r},me=(r,e)=>Yn(r,Gn(e));var lr=(r,e)=>{var t={};for(var n in r)ar.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&Ze)for(var n of Ze(r))e.indexOf(n)<0&&cr.call(r,n)&&(t[n]=r[n]);return t};import{a7 as ut,a8 as _e,a9 as Vt,aa as Xn,ab as Xr,ac as Jn,ad as Ke,ae as ft,af as Zn,ag as dt,ah as Qn,ai as Dt,aj as ct,ak as es,al as Ce,am as ur,g as x,an as ts,X as rs,r as V,j as fr,h as zt,x as Te,A as ns,L as Oe,d as ye,ao as ss,a3 as Jr,i as We,ap as vt,y as xe,D as ht,aq as be,a0 as is,m as os,v as as,o as P,c as D,G as I,I as Me,n as L,q as h,k as de,b as se,E as ne,w as X,H as Le,a2 as bt,l as ie,J as Zr,ar as cs,t as he,F as Et,_ as Wt,B as ls,as as dr,s as Qr,at as us,au as en,a5 as tn,a as Ve,av as rn,N as nn,Z as lt,aw as sn,ax as fs,ay as ds,az as wt,e as on,T as hs,a6 as ps,a1 as ys,aA as gs}from"./index.7164f915.js";import{u as ms,i as hr,f as vs,g as bs,h as Ut,j as ws,V as xs,v as _s,k as Es,b as an,E as Be,l as As,m as cn,n as Kt,o as At,p as Ts,q as pr,e as Os}from"./el-button.673f29c1.js";import{_ as Ss}from"./plugin-vue_export-helper.21dcd24c.js";var Cs=ut(_e,"WeakMap"),Tt=Cs,yr=Object.create,Rs=function(){function r(){}return function(e){if(!Vt(e))return{};if(yr)return yr(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}(),Fs=Rs;function Ps(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}function $s(r,e){for(var t=-1,n=r==null?0:r.length;++t<n&&e(r[t],t,r)!==!1;);return r}function pt(r,e,t,n){var s=!t;t||(t={});for(var i=-1,o=e.length;++i<o;){var a=e[i],c=n?n(t[a],r[a],a,t,r):void 0;c===void 0&&(c=r[a]),s?Xn(t,a,c):Xr(t,a,c)}return t}var ks=9007199254740991;function ln(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=ks}function un(r){return r!=null&&ln(r.length)&&!Jn(r)}var Ns=Object.prototype;function Ht(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||Ns;return r===t}function Bs(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var Is="[object Arguments]";function gr(r){return Ke(r)&&ft(r)==Is}var fn=Object.prototype,Ls=fn.hasOwnProperty,qs=fn.propertyIsEnumerable,js=gr(function(){return arguments}())?gr:function(r){return Ke(r)&&Ls.call(r,"callee")&&!qs.call(r,"callee")},Ms=js;function Vs(){return!1}var dn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,mr=dn&&typeof module=="object"&&module&&!module.nodeType&&module,Ds=mr&&mr.exports===dn,vr=Ds?_e.Buffer:void 0,zs=vr?vr.isBuffer:void 0,Ws=zs||Vs,hn=Ws,Us="[object Arguments]",Ks="[object Array]",Hs="[object Boolean]",Ys="[object Date]",Gs="[object Error]",Xs="[object Function]",Js="[object Map]",Zs="[object Number]",Qs="[object Object]",ei="[object RegExp]",ti="[object Set]",ri="[object String]",ni="[object WeakMap]",si="[object ArrayBuffer]",ii="[object DataView]",oi="[object Float32Array]",ai="[object Float64Array]",ci="[object Int8Array]",li="[object Int16Array]",ui="[object Int32Array]",fi="[object Uint8Array]",di="[object Uint8ClampedArray]",hi="[object Uint16Array]",pi="[object Uint32Array]",$={};$[oi]=$[ai]=$[ci]=$[li]=$[ui]=$[fi]=$[di]=$[hi]=$[pi]=!0;$[Us]=$[Ks]=$[si]=$[Hs]=$[ii]=$[Ys]=$[Gs]=$[Xs]=$[Js]=$[Zs]=$[Qs]=$[ei]=$[ti]=$[ri]=$[ni]=!1;function yi(r){return Ke(r)&&ln(r.length)&&!!$[ft(r)]}function Yt(r){return function(e){return r(e)}}var pn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,De=pn&&typeof module=="object"&&module&&!module.nodeType&&module,gi=De&&De.exports===pn,xt=gi&&Zn.process,mi=function(){try{var r=De&&De.require&&De.require("util").types;return r||xt&&xt.binding&&xt.binding("util")}catch{}}(),Se=mi,br=Se&&Se.isTypedArray,vi=br?Yt(br):yi,bi=vi,wi=Object.prototype,xi=wi.hasOwnProperty;function yn(r,e){var t=dt(r),n=!t&&Ms(r),s=!t&&!n&&hn(r),i=!t&&!n&&!s&&bi(r),o=t||n||s||i,a=o?Bs(r.length,String):[],c=a.length;for(var y in r)(e||xi.call(r,y))&&!(o&&(y=="length"||s&&(y=="offset"||y=="parent")||i&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||Qn(y,c)))&&a.push(y);return a}function gn(r,e){return function(t){return r(e(t))}}var _i=gn(Object.keys,Object),Ei=_i,Ai=Object.prototype,Ti=Ai.hasOwnProperty;function Oi(r){if(!Ht(r))return Ei(r);var e=[];for(var t in Object(r))Ti.call(r,t)&&t!="constructor"&&e.push(t);return e}function Gt(r){return un(r)?yn(r):Oi(r)}function Si(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var Ci=Object.prototype,Ri=Ci.hasOwnProperty;function Fi(r){if(!Vt(r))return Si(r);var e=Ht(r),t=[];for(var n in r)n=="constructor"&&(e||!Ri.call(r,n))||t.push(n);return t}function Xt(r){return un(r)?yn(r,!0):Fi(r)}function mn(r,e){for(var t=-1,n=e.length,s=r.length;++t<n;)r[s+t]=e[t];return r}var Pi=gn(Object.getPrototypeOf,Object),vn=Pi;function Ot(){if(!arguments.length)return[];var r=arguments[0];return dt(r)?r:[r]}function $i(){this.__data__=new Dt,this.size=0}function ki(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function Ni(r){return this.__data__.get(r)}function Bi(r){return this.__data__.has(r)}var Ii=200;function Li(r,e){var t=this.__data__;if(t instanceof Dt){var n=t.__data__;if(!ct||n.length<Ii-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new es(n)}return t.set(r,e),this.size=t.size,this}function Re(r){var e=this.__data__=new Dt(r);this.size=e.size}Re.prototype.clear=$i;Re.prototype.delete=ki;Re.prototype.get=Ni;Re.prototype.has=Bi;Re.prototype.set=Li;function qi(r,e){return r&&pt(e,Gt(e),r)}function ji(r,e){return r&&pt(e,Xt(e),r)}var bn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,wr=bn&&typeof module=="object"&&module&&!module.nodeType&&module,Mi=wr&&wr.exports===bn,xr=Mi?_e.Buffer:void 0,_r=xr?xr.allocUnsafe:void 0;function Vi(r,e){if(e)return r.slice();var t=r.length,n=_r?_r(t):new r.constructor(t);return r.copy(n),n}function Di(r,e){for(var t=-1,n=r==null?0:r.length,s=0,i=[];++t<n;){var o=r[t];e(o,t,r)&&(i[s++]=o)}return i}function wn(){return[]}var zi=Object.prototype,Wi=zi.propertyIsEnumerable,Er=Object.getOwnPropertySymbols,Ui=Er?function(r){return r==null?[]:(r=Object(r),Di(Er(r),function(e){return Wi.call(r,e)}))}:wn,Jt=Ui;function Ki(r,e){return pt(r,Jt(r),e)}var Hi=Object.getOwnPropertySymbols,Yi=Hi?function(r){for(var e=[];r;)mn(e,Jt(r)),r=vn(r);return e}:wn,xn=Yi;function Gi(r,e){return pt(r,xn(r),e)}function _n(r,e,t){var n=e(r);return dt(r)?n:mn(n,t(r))}function Xi(r){return _n(r,Gt,Jt)}function Ji(r){return _n(r,Xt,xn)}var Zi=ut(_e,"DataView"),St=Zi,Qi=ut(_e,"Promise"),Ct=Qi,eo=ut(_e,"Set"),Rt=eo,Ar="[object Map]",to="[object Object]",Tr="[object Promise]",Or="[object Set]",Sr="[object WeakMap]",Cr="[object DataView]",ro=Ce(St),no=Ce(ct),so=Ce(Ct),io=Ce(Rt),oo=Ce(Tt),ve=ft;(St&&ve(new St(new ArrayBuffer(1)))!=Cr||ct&&ve(new ct)!=Ar||Ct&&ve(Ct.resolve())!=Tr||Rt&&ve(new Rt)!=Or||Tt&&ve(new Tt)!=Sr)&&(ve=function(r){var e=ft(r),t=e==to?r.constructor:void 0,n=t?Ce(t):"";if(n)switch(n){case ro:return Cr;case no:return Ar;case so:return Tr;case io:return Or;case oo:return Sr}return e});var Zt=ve,ao=Object.prototype,co=ao.hasOwnProperty;function lo(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&co.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var uo=_e.Uint8Array,Rr=uo;function Qt(r){var e=new r.constructor(r.byteLength);return new Rr(e).set(new Rr(r)),e}function fo(r,e){var t=e?Qt(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}var ho=/\w*$/;function po(r){var e=new r.constructor(r.source,ho.exec(r));return e.lastIndex=r.lastIndex,e}var Fr=ur?ur.prototype:void 0,Pr=Fr?Fr.valueOf:void 0;function yo(r){return Pr?Object(Pr.call(r)):{}}function go(r,e){var t=e?Qt(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var mo="[object Boolean]",vo="[object Date]",bo="[object Map]",wo="[object Number]",xo="[object RegExp]",_o="[object Set]",Eo="[object String]",Ao="[object Symbol]",To="[object ArrayBuffer]",Oo="[object DataView]",So="[object Float32Array]",Co="[object Float64Array]",Ro="[object Int8Array]",Fo="[object Int16Array]",Po="[object Int32Array]",$o="[object Uint8Array]",ko="[object Uint8ClampedArray]",No="[object Uint16Array]",Bo="[object Uint32Array]";function Io(r,e,t){var n=r.constructor;switch(e){case To:return Qt(r);case mo:case vo:return new n(+r);case Oo:return fo(r,t);case So:case Co:case Ro:case Fo:case Po:case $o:case ko:case No:case Bo:return go(r,t);case bo:return new n;case wo:case Eo:return new n(r);case xo:return po(r);case _o:return new n;case Ao:return yo(r)}}function Lo(r){return typeof r.constructor=="function"&&!Ht(r)?Fs(vn(r)):{}}var qo="[object Map]";function jo(r){return Ke(r)&&Zt(r)==qo}var $r=Se&&Se.isMap,Mo=$r?Yt($r):jo,Vo=Mo,Do="[object Set]";function zo(r){return Ke(r)&&Zt(r)==Do}var kr=Se&&Se.isSet,Wo=kr?Yt(kr):zo,Uo=Wo,Ko=1,Ho=2,Yo=4,En="[object Arguments]",Go="[object Array]",Xo="[object Boolean]",Jo="[object Date]",Zo="[object Error]",An="[object Function]",Qo="[object GeneratorFunction]",ea="[object Map]",ta="[object Number]",Tn="[object Object]",ra="[object RegExp]",na="[object Set]",sa="[object String]",ia="[object Symbol]",oa="[object WeakMap]",aa="[object ArrayBuffer]",ca="[object DataView]",la="[object Float32Array]",ua="[object Float64Array]",fa="[object Int8Array]",da="[object Int16Array]",ha="[object Int32Array]",pa="[object Uint8Array]",ya="[object Uint8ClampedArray]",ga="[object Uint16Array]",ma="[object Uint32Array]",F={};F[En]=F[Go]=F[aa]=F[ca]=F[Xo]=F[Jo]=F[la]=F[ua]=F[fa]=F[da]=F[ha]=F[ea]=F[ta]=F[Tn]=F[ra]=F[na]=F[sa]=F[ia]=F[pa]=F[ya]=F[ga]=F[ma]=!0;F[Zo]=F[An]=F[oa]=!1;function nt(r,e,t,n,s,i){var o,a=e&Ko,c=e&Ho,y=e&Yo;if(t&&(o=s?t(r,n,s,i):t(r)),o!==void 0)return o;if(!Vt(r))return r;var u=dt(r);if(u){if(o=lo(r),!a)return Ps(r,o)}else{var d=Zt(r),b=d==An||d==Qo;if(hn(r))return Vi(r,a);if(d==Tn||d==En||b&&!s){if(o=c||b?{}:Lo(r),!a)return c?Gi(r,ji(o,r)):Ki(r,qi(o,r))}else{if(!F[d])return s?r:{};o=Io(r,d,a)}}i||(i=new Re);var R=i.get(r);if(R)return R;i.set(r,o),Uo(r)?r.forEach(function(v){o.add(nt(v,e,t,v,r,i))}):Vo(r)&&r.forEach(function(v,p){o.set(p,nt(v,e,t,p,r,i))});var S=y?c?Ji:Xi:c?Xt:Gt,l=u?void 0:S(r);return $s(l||r,function(v,p){l&&(p=v,v=r[p]),Xr(o,p,nt(v,e,t,p,r,i))}),o}var va=4;function Nr(r){return nt(r,va)}function ba(r){return r==null}class wa extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function xa(r,e){throw new wa(`[${r}] ${e}`)}const Ft="update:modelValue",_a=r=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(r),Ea=["class","style"],Aa=/^on[A-Z]/,Ta=r=>{const{excludeListeners:e=!1,excludeKeys:t}=r,n=x(()=>((t==null?void 0:t.value)||[]).concat(Ea)),s=rs();return s?x(()=>{var i;return ts(Object.entries((i=s.proxy)==null?void 0:i.$attrs).filter(([o])=>!n.value.includes(o)&&!(e&&Aa.test(o))))}):x(()=>({}))};function Oa(r){const e=V();function t(){if(r.value==null)return;const{selectionStart:s,selectionEnd:i,value:o}=r.value;if(s==null||i==null)return;const a=o.slice(0,Math.max(0,s)),c=o.slice(Math.max(0,i));e.value={selectionStart:s,selectionEnd:i,value:o,beforeTxt:a,afterTxt:c}}function n(){if(r.value==null||e.value==null)return;const{value:s}=r.value,{beforeTxt:i,afterTxt:o,selectionStart:a}=e.value;if(i==null||o==null||a==null)return;let c=s.length;if(s.endsWith(o))c=s.length-o.length;else if(s.startsWith(i))c=i.length;else{const y=i[a-1],u=s.indexOf(y,a-1);u!==-1&&(c=u+1)}r.value.setSelectionRange(c,c)}return[t,n]}let te;const Sa=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Ca=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Ra(r){const e=window.getComputedStyle(r),t=e.getPropertyValue("box-sizing"),n=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),s=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:Ca.map(o=>`${o}:${e.getPropertyValue(o)}`).join(";"),paddingSize:n,borderSize:s,boxSizing:t}}function Br(r,e=1,t){var n;te||(te=document.createElement("textarea"),document.body.appendChild(te));const{paddingSize:s,borderSize:i,boxSizing:o,contextStyle:a}=Ra(r);te.setAttribute("style",`${a};${Sa}`),te.value=r.value||r.placeholder||"";let c=te.scrollHeight;const y={};o==="border-box"?c=c+i:o==="content-box"&&(c=c-s),te.value="";const u=te.scrollHeight-s;if(fr(e)){let d=u*e;o==="border-box"&&(d=d+s+i),c=Math.max(d,c),y.minHeight=`${d}px`}if(fr(t)){let d=u*t;o==="border-box"&&(d=d+s+i),c=Math.min(d,c)}return y.height=`${c}px`,(n=te.parentNode)==null||n.removeChild(te),te=void 0,y}const Fa=zt({id:{type:String,default:void 0},size:ms,disabled:Boolean,modelValue:{type:Te([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Te([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:hr},prefixIcon:{type:hr},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Te([Object,Array,String]),default:()=>ns({})}}),Pa={[Ft]:r=>Oe(r),input:r=>Oe(r),change:r=>Oe(r),focus:r=>r instanceof FocusEvent,blur:r=>r instanceof FocusEvent,clear:()=>!0,mouseleave:r=>r instanceof MouseEvent,mouseenter:r=>r instanceof MouseEvent,keydown:r=>r instanceof Event,compositionstart:r=>r instanceof CompositionEvent,compositionupdate:r=>r instanceof CompositionEvent,compositionend:r=>r instanceof CompositionEvent},$a=["role"],ka=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],Na=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],Ba=ye({name:"ElInput",inheritAttrs:!1}),Ia=ye(me(ee({},Ba),{props:Fa,emits:Pa,setup(r,{expose:e,emit:t}){const n=r,s=ss(),i=Jr(),o=x(()=>{const f={};return n.containerRole==="combobox"&&(f["aria-haspopup"]=s["aria-haspopup"],f["aria-owns"]=s["aria-owns"],f["aria-expanded"]=s["aria-expanded"]),f}),a=x(()=>[n.type==="textarea"?v.b():l.b(),l.m(R.value),l.is("disabled",S.value),l.is("exceed",Ge.value),{[l.b("group")]:i.prepend||i.append,[l.bm("group","append")]:i.append,[l.bm("group","prepend")]:i.prepend,[l.m("prefix")]:i.prefix||n.prefixIcon,[l.m("suffix")]:i.suffix||n.suffixIcon||n.clearable||n.showPassword,[l.bm("suffix","password-clear")]:Z.value&&$e.value},s.class]),c=x(()=>[l.e("wrapper"),l.is("focus",g.value)]),y=Ta({excludeKeys:x(()=>Object.keys(o.value))}),{form:u,formItem:d}=vs(),{inputId:b}=bs(n,{formItemContext:d}),R=Ut(),S=ws(),l=We("input"),v=We("textarea"),p=vt(),w=vt(),g=V(!1),_=V(!1),T=V(!1),C=V(!1),z=V(),M=vt(n.inputStyle),H=x(()=>p.value||w.value),ue=x(()=>{var f;return(f=u==null?void 0:u.statusIcon)!=null?f:!1}),G=x(()=>(d==null?void 0:d.validateState)||""),W=x(()=>G.value&&xs[G.value]),U=x(()=>C.value?_s:Es),Pe=x(()=>[s.style,n.inputStyle]),Ye=x(()=>[n.inputStyle,M.value,{resize:n.resize}]),J=x(()=>ba(n.modelValue)?"":String(n.modelValue)),Z=x(()=>n.clearable&&!S.value&&!n.readonly&&!!J.value&&(g.value||_.value)),$e=x(()=>n.showPassword&&!S.value&&!n.readonly&&!!J.value&&(!!J.value||g.value)),fe=x(()=>n.showWordLimit&&!!y.value.maxlength&&(n.type==="text"||n.type==="textarea")&&!S.value&&!n.readonly&&!n.showPassword),ke=x(()=>Array.from(J.value).length),Ge=x(()=>!!fe.value&&ke.value>Number(y.value.maxlength)),Ne=x(()=>!!i.suffix||!!n.suffixIcon||Z.value||n.showPassword||fe.value||!!G.value&&ue.value),[Xe,gt]=Oa(p);an(w,f=>{if(!fe.value||n.resize!=="both")return;const k=f[0],{width:ge}=k.contentRect;z.value={right:`calc(100% - ${ge+15+6}px)`}});const Ee=()=>{const{type:f,autosize:k}=n;if(!(!ls||f!=="textarea"))if(k){const ge=dr(k)?k.minRows:void 0,mt=dr(k)?k.maxRows:void 0;M.value=ee({},Br(w.value,ge,mt))}else M.value={minHeight:Br(w.value).minHeight}},ce=()=>{const f=H.value;!f||f.value===J.value||(f.value=J.value)},m=async f=>{Xe();let{value:k}=f.target;if(n.formatter&&(k=n.parser?n.parser(k):k,k=n.formatter(k)),!T.value){if(k===J.value){ce();return}t(Ft,k),t("input",k),await be(),ce(),gt()}},O=f=>{t("change",f.target.value)},B=f=>{t("compositionstart",f),T.value=!0},N=f=>{var k;t("compositionupdate",f);const ge=(k=f.target)==null?void 0:k.value,mt=ge[ge.length-1]||"";T.value=!_a(mt)},K=f=>{t("compositionend",f),T.value&&(T.value=!1,m(f))},Q=()=>{C.value=!C.value,Je()},Je=async()=>{var f;await be(),(f=H.value)==null||f.focus()},zn=()=>{var f;return(f=H.value)==null?void 0:f.blur()},rr=f=>{g.value=!0,t("focus",f)},nr=f=>{var k;g.value=!1,t("blur",f),n.validateEvent&&((k=d==null?void 0:d.validate)==null||k.call(d,"blur").catch(ge=>void 0))},Wn=f=>{_.value=!1,t("mouseleave",f)},Un=f=>{_.value=!0,t("mouseenter",f)},sr=f=>{t("keydown",f)},Kn=()=>{var f;(f=H.value)==null||f.select()},ir=()=>{t(Ft,""),t("change",""),t("clear"),t("input","")};return xe(()=>n.modelValue,()=>{var f;be(()=>Ee()),n.validateEvent&&((f=d==null?void 0:d.validate)==null||f.call(d,"change").catch(k=>void 0))}),xe(J,()=>ce()),xe(()=>n.type,async()=>{await be(),ce(),Ee()}),ht(()=>{!n.formatter&&n.parser,ce(),be(Ee)}),e({input:p,textarea:w,ref:H,textareaStyle:Ye,autosize:is(n,"autosize"),focus:Je,blur:zn,select:Kn,clear:ir,resizeTextarea:Ee}),(f,k)=>os((P(),D("div",bt(h(o),{class:h(a),style:h(Pe),role:f.containerRole,onMouseenter:Un,onMouseleave:Wn}),[I(" input "),f.type!=="textarea"?(P(),D(Me,{key:0},[I(" prepend slot "),f.$slots.prepend?(P(),D("div",{key:0,class:L(h(l).be("group","prepend"))},[de(f.$slots,"prepend")],2)):I("v-if",!0),se("div",{class:L(h(c))},[I(" prefix slot "),f.$slots.prefix||f.prefixIcon?(P(),D("span",{key:0,class:L(h(l).e("prefix"))},[se("span",{class:L(h(l).e("prefix-inner")),onClick:Je},[de(f.$slots,"prefix"),f.prefixIcon?(P(),ne(h(Be),{key:0,class:L(h(l).e("icon"))},{default:X(()=>[(P(),ne(Le(f.prefixIcon)))]),_:1},8,["class"])):I("v-if",!0)],2)],2)):I("v-if",!0),se("input",bt({id:h(b),ref_key:"input",ref:p,class:h(l).e("inner")},h(y),{type:f.showPassword?C.value?"text":"password":f.type,disabled:h(S),formatter:f.formatter,parser:f.parser,readonly:f.readonly,autocomplete:f.autocomplete,tabindex:f.tabindex,"aria-label":f.label,placeholder:f.placeholder,style:f.inputStyle,form:n.form,onCompositionstart:B,onCompositionupdate:N,onCompositionend:K,onInput:m,onFocus:rr,onBlur:nr,onChange:O,onKeydown:sr}),null,16,ka),I(" suffix slot "),h(Ne)?(P(),D("span",{key:1,class:L(h(l).e("suffix"))},[se("span",{class:L(h(l).e("suffix-inner")),onClick:Je},[!h(Z)||!h($e)||!h(fe)?(P(),D(Me,{key:0},[de(f.$slots,"suffix"),f.suffixIcon?(P(),ne(h(Be),{key:0,class:L(h(l).e("icon"))},{default:X(()=>[(P(),ne(Le(f.suffixIcon)))]),_:1},8,["class"])):I("v-if",!0)],64)):I("v-if",!0),h(Z)?(P(),ne(h(Be),{key:1,class:L([h(l).e("icon"),h(l).e("clear")]),onMousedown:Zr(h(cs),["prevent"]),onClick:ir},{default:X(()=>[ie(h(As))]),_:1},8,["class","onMousedown"])):I("v-if",!0),h($e)?(P(),ne(h(Be),{key:2,class:L([h(l).e("icon"),h(l).e("password")]),onClick:Q},{default:X(()=>[(P(),ne(Le(h(U))))]),_:1},8,["class"])):I("v-if",!0),h(fe)?(P(),D("span",{key:3,class:L(h(l).e("count"))},[se("span",{class:L(h(l).e("count-inner"))},he(h(ke))+" / "+he(h(y).maxlength),3)],2)):I("v-if",!0),h(G)&&h(W)&&h(ue)?(P(),ne(h(Be),{key:4,class:L([h(l).e("icon"),h(l).e("validateIcon"),h(l).is("loading",h(G)==="validating")])},{default:X(()=>[(P(),ne(Le(h(W))))]),_:1},8,["class"])):I("v-if",!0)],2)],2)):I("v-if",!0)],2),I(" append slot "),f.$slots.append?(P(),D("div",{key:1,class:L(h(l).be("group","append"))},[de(f.$slots,"append")],2)):I("v-if",!0)],64)):(P(),D(Me,{key:1},[I(" textarea "),se("textarea",bt({id:h(b),ref_key:"textarea",ref:w,class:h(v).e("inner")},h(y),{tabindex:f.tabindex,disabled:h(S),readonly:f.readonly,autocomplete:f.autocomplete,style:h(Ye),"aria-label":f.label,placeholder:f.placeholder,form:n.form,onCompositionstart:B,onCompositionupdate:N,onCompositionend:K,onInput:m,onFocus:rr,onBlur:nr,onChange:O,onKeydown:sr}),null,16,Na),h(fe)?(P(),D("span",{key:0,style:Et(z.value),class:L(h(l).e("count"))},he(h(ke))+" / "+he(h(y).maxlength),7)):I("v-if",!0)],64))],16,$a)),[[as,f.type!=="hidden"]])}}));var La=Wt(Ia,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const qa=Qr(La),ja=zt({model:Object,rules:{type:Te(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:{type:String,values:cn},disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1},scrollToError:Boolean}),Ma={validate:(r,e,t)=>(us(r)||Oe(r))&&en(e)&&Oe(t)};function Va(){const r=V([]),e=x(()=>{if(!r.value.length)return"0";const i=Math.max(...r.value);return i?`${i}px`:""});function t(i){const o=r.value.indexOf(i);return o===-1&&e.value,o}function n(i,o){if(i&&o){const a=t(o);r.value.splice(a,1,i)}else i&&r.value.push(i)}function s(i){const o=t(i);o>-1&&r.value.splice(o,1)}return{autoLabelWidth:e,registerLabelWidth:n,deregisterLabelWidth:s}}const Qe=(r,e)=>{const t=Ot(e);return t.length>0?r.filter(n=>n.prop&&t.includes(n.prop)):r},Da="ElForm",za=ye({name:Da}),Wa=ye(me(ee({},za),{props:ja,emits:Ma,setup(r,{expose:e,emit:t}){const n=r,s=[],i=Ut(),o=We("form"),a=x(()=>{const{labelPosition:w,inline:g}=n;return[o.b(),o.m(i.value||"default"),{[o.m(`label-${w}`)]:w,[o.m("inline")]:g}]}),c=w=>{s.push(w)},y=w=>{w.prop&&s.splice(s.indexOf(w),1)},u=(w=[])=>{!n.model||Qe(s,w).forEach(g=>g.resetField())},d=(w=[])=>{Qe(s,w).forEach(g=>g.clearValidate())},b=x(()=>!!n.model),R=w=>{if(s.length===0)return[];const g=Qe(s,w);return g.length?g:[]},S=async w=>v(void 0,w),l=async w=>{if(!b.value)return!1;const g=R(w);if(g.length===0)return!0;let _={};for(const T of g)try{await T.validate("")}catch(C){_=ee(ee({},_),C)}return Object.keys(_).length===0?!0:Promise.reject(_)},v=async(w=[],g)=>{const _=!nn(g);try{const T=await l(w);return T===!0&&(g==null||g(T)),T}catch(T){if(T instanceof Error)throw T;const C=T;return n.scrollToError&&p(Object.keys(C)[0]),g==null||g(!1,C),_&&Promise.reject(C)}},p=w=>{var g;const _=Qe(s,w)[0];_&&((g=_.$el)==null||g.scrollIntoView())};return xe(()=>n.rules,()=>{n.validateOnRuleChange&&S().catch(w=>void 0)},{deep:!0}),tn(Kt,Ve(ee(me(ee({},rn(n)),{emit:t,resetFields:u,clearValidate:d,validateField:v,addField:c,removeField:y}),Va()))),e({validate:S,validateField:v,resetFields:u,clearValidate:d,scrollToField:p}),(w,g)=>(P(),D("form",{class:L(h(a))},[de(w.$slots,"default")],2))}}));var Ua=Wt(Wa,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);function we(){return we=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},we.apply(this,arguments)}function Ka(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,Ue(r,e)}function Pt(r){return Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pt(r)}function Ue(r,e){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Ue(r,e)}function Ha(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function st(r,e,t){return Ha()?st=Reflect.construct.bind():st=function(s,i,o){var a=[null];a.push.apply(a,i);var c=Function.bind.apply(s,a),y=new c;return o&&Ue(y,o.prototype),y},st.apply(null,arguments)}function Ya(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function $t(r){var e=typeof Map=="function"?new Map:void 0;return $t=function(n){if(n===null||!Ya(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e!="undefined"){if(e.has(n))return e.get(n);e.set(n,s)}function s(){return st(n,arguments,Pt(this).constructor)}return s.prototype=Object.create(n.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Ue(s,n)},$t(r)}var Ga=/%[sdj%]/g,Xa=function(){};typeof process!="undefined"&&process.env;function kt(r){if(!r||!r.length)return null;var e={};return r.forEach(function(t){var n=t.field;e[n]=e[n]||[],e[n].push(t)}),e}function Y(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];var s=0,i=t.length;if(typeof r=="function")return r.apply(null,t);if(typeof r=="string"){var o=r.replace(Ga,function(a){if(a==="%%")return"%";if(s>=i)return a;switch(a){case"%s":return String(t[s++]);case"%d":return Number(t[s++]);case"%j":try{return JSON.stringify(t[s++])}catch{return"[Circular]"}break;default:return a}});return o}return r}function Ja(r){return r==="string"||r==="url"||r==="hex"||r==="email"||r==="date"||r==="pattern"}function j(r,e){return!!(r==null||e==="array"&&Array.isArray(r)&&!r.length||Ja(e)&&typeof r=="string"&&!r)}function Za(r,e,t){var n=[],s=0,i=r.length;function o(a){n.push.apply(n,a||[]),s++,s===i&&t(n)}r.forEach(function(a){e(a,o)})}function Ir(r,e,t){var n=0,s=r.length;function i(o){if(o&&o.length){t(o);return}var a=n;n=n+1,a<s?e(r[a],i):t([])}i([])}function Qa(r){var e=[];return Object.keys(r).forEach(function(t){e.push.apply(e,r[t]||[])}),e}var Lr=function(r){Ka(e,r);function e(t,n){var s;return s=r.call(this,"Async Validation Error")||this,s.errors=t,s.fields=n,s}return e}($t(Error));function ec(r,e,t,n,s){if(e.first){var i=new Promise(function(b,R){var S=function(p){return n(p),p.length?R(new Lr(p,kt(p))):b(s)},l=Qa(r);Ir(l,t,S)});return i.catch(function(b){return b}),i}var o=e.firstFields===!0?Object.keys(r):e.firstFields||[],a=Object.keys(r),c=a.length,y=0,u=[],d=new Promise(function(b,R){var S=function(v){if(u.push.apply(u,v),y++,y===c)return n(u),u.length?R(new Lr(u,kt(u))):b(s)};a.length||(n(u),b(s)),a.forEach(function(l){var v=r[l];o.indexOf(l)!==-1?Ir(v,t,S):Za(v,t,S)})});return d.catch(function(b){return b}),d}function tc(r){return!!(r&&r.message!==void 0)}function rc(r,e){for(var t=r,n=0;n<e.length;n++){if(t==null)return t;t=t[e[n]]}return t}function qr(r,e){return function(t){var n;return r.fullFields?n=rc(e,r.fullFields):n=e[t.field||r.fullField],tc(t)?(t.field=t.field||r.fullField,t.fieldValue=n,t):{message:typeof t=="function"?t():t,fieldValue:n,field:t.field||r.fullField}}}function jr(r,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];typeof n=="object"&&typeof r[t]=="object"?r[t]=we({},r[t],n):r[t]=n}}return r}var On=function(e,t,n,s,i,o){e.required&&(!n.hasOwnProperty(e.field)||j(t,o||e.type))&&s.push(Y(i.messages.required,e.fullField))},nc=function(e,t,n,s,i){(/^\s+$/.test(t)||t==="")&&s.push(Y(i.messages.whitespace,e.fullField))},et,sc=function(){if(et)return et;var r="[a-fA-F\\d:]",e=function(_){return _&&_.includeBoundaries?"(?:(?<=\\s|^)(?="+r+")|(?<="+r+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",s=(`
(?:
(?:`+n+":){7}(?:"+n+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+n+":){6}(?:"+t+"|:"+n+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+n+":){5}(?::"+t+"|(?::"+n+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+n+":){4}(?:(?::"+n+"){0,1}:"+t+"|(?::"+n+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+n+":){3}(?:(?::"+n+"){0,2}:"+t+"|(?::"+n+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+n+":){2}(?:(?::"+n+"){0,3}:"+t+"|(?::"+n+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+n+":){1}(?:(?::"+n+"){0,4}:"+t+"|(?::"+n+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+n+"){0,5}:"+t+"|(?::"+n+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),i=new RegExp("(?:^"+t+"$)|(?:^"+s+"$)"),o=new RegExp("^"+t+"$"),a=new RegExp("^"+s+"$"),c=function(_){return _&&_.exact?i:new RegExp("(?:"+e(_)+t+e(_)+")|(?:"+e(_)+s+e(_)+")","g")};c.v4=function(g){return g&&g.exact?o:new RegExp(""+e(g)+t+e(g),"g")},c.v6=function(g){return g&&g.exact?a:new RegExp(""+e(g)+s+e(g),"g")};var y="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",d=c.v4().source,b=c.v6().source,R="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",S="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",l="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",p='(?:[/?#][^\\s"]*)?',w="(?:"+y+"|www\\.)"+u+"(?:localhost|"+d+"|"+b+"|"+R+S+l+")"+v+p;return et=new RegExp("(?:^"+w+"$)","i"),et},Mr={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},qe={integer:function(e){return qe.number(e)&&parseInt(e,10)===e},float:function(e){return qe.number(e)&&!qe.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!qe.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Mr.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(sc())},hex:function(e){return typeof e=="string"&&!!e.match(Mr.hex)}},ic=function(e,t,n,s,i){if(e.required&&t===void 0){On(e,t,n,s,i);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;o.indexOf(a)>-1?qe[a](t)||s.push(Y(i.messages.types[a],e.fullField,e.type)):a&&typeof t!==e.type&&s.push(Y(i.messages.types[a],e.fullField,e.type))},oc=function(e,t,n,s,i){var o=typeof e.len=="number",a=typeof e.min=="number",c=typeof e.max=="number",y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=t,d=null,b=typeof t=="number",R=typeof t=="string",S=Array.isArray(t);if(b?d="number":R?d="string":S&&(d="array"),!d)return!1;S&&(u=t.length),R&&(u=t.replace(y,"_").length),o?u!==e.len&&s.push(Y(i.messages[d].len,e.fullField,e.len)):a&&!c&&u<e.min?s.push(Y(i.messages[d].min,e.fullField,e.min)):c&&!a&&u>e.max?s.push(Y(i.messages[d].max,e.fullField,e.max)):a&&c&&(u<e.min||u>e.max)&&s.push(Y(i.messages[d].range,e.fullField,e.min,e.max))},Ae="enum",ac=function(e,t,n,s,i){e[Ae]=Array.isArray(e[Ae])?e[Ae]:[],e[Ae].indexOf(t)===-1&&s.push(Y(i.messages[Ae],e.fullField,e[Ae].join(", ")))},cc=function(e,t,n,s,i){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||s.push(Y(i.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(t)||s.push(Y(i.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},E={required:On,whitespace:nc,type:ic,range:oc,enum:ac,pattern:cc},lc=function(e,t,n,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(j(t,"string")&&!e.required)return n();E.required(e,t,s,o,i,"string"),j(t,"string")||(E.type(e,t,s,o,i),E.range(e,t,s,o,i),E.pattern(e,t,s,o,i),e.whitespace===!0&&E.whitespace(e,t,s,o,i))}n(o)},uc=function(e,t,n,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(j(t)&&!e.required)return n();E.required(e,t,s,o,i),t!==void 0&&E.type(e,t,s,o,i)}n(o)},fc=function(e,t,n,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(t===""&&(t=void 0),j(t)&&!e.required)return n();E.required(e,t,s,o,i),t!==void 0&&(E.type(e,t,s,o,i),E.range(e,t,s,o,i))}n(o)},dc=function(e,t,n,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(j(t)&&!e.required)return n();E.required(e,t,s,o,i),t!==void 0&&E.type(e,t,s,o,i)}n(o)},hc=function(e,t,n,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(j(t)&&!e.required)return n();E.required(e,t,s,o,i),j(t)||E.type(e,t,s,o,i)}n(o)},pc=function(e,t,n,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(j(t)&&!e.required)return n();E.required(e,t,s,o,i),t!==void 0&&(E.type(e,t,s,o,i),E.range(e,t,s,o,i))}n(o)},yc=function(e,t,n,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(j(t)&&!e.required)return n();E.required(e,t,s,o,i),t!==void 0&&(E.type(e,t,s,o,i),E.range(e,t,s,o,i))}n(o)},gc=function(e,t,n,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(t==null&&!e.required)return n();E.required(e,t,s,o,i,"array"),t!=null&&(E.type(e,t,s,o,i),E.range(e,t,s,o,i))}n(o)},mc=function(e,t,n,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(j(t)&&!e.required)return n();E.required(e,t,s,o,i),t!==void 0&&E.type(e,t,s,o,i)}n(o)},vc="enum",bc=function(e,t,n,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(j(t)&&!e.required)return n();E.required(e,t,s,o,i),t!==void 0&&E[vc](e,t,s,o,i)}n(o)},wc=function(e,t,n,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(j(t,"string")&&!e.required)return n();E.required(e,t,s,o,i),j(t,"string")||E.pattern(e,t,s,o,i)}n(o)},xc=function(e,t,n,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(j(t,"date")&&!e.required)return n();if(E.required(e,t,s,o,i),!j(t,"date")){var c;t instanceof Date?c=t:c=new Date(t),E.type(e,c,s,o,i),c&&E.range(e,c.getTime(),s,o,i)}}n(o)},_c=function(e,t,n,s,i){var o=[],a=Array.isArray(t)?"array":typeof t;E.required(e,t,s,o,i,a),n(o)},_t=function(e,t,n,s,i){var o=e.type,a=[],c=e.required||!e.required&&s.hasOwnProperty(e.field);if(c){if(j(t,o)&&!e.required)return n();E.required(e,t,s,a,i,o),j(t,o)||E.type(e,t,s,a,i)}n(a)},Ec=function(e,t,n,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(j(t)&&!e.required)return n();E.required(e,t,s,o,i)}n(o)},ze={string:lc,method:uc,number:fc,boolean:dc,regexp:hc,integer:pc,float:yc,array:gc,object:mc,enum:bc,pattern:wc,date:xc,url:_t,hex:_t,email:_t,required:_c,any:Ec};function Nt(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Bt=Nt(),He=function(){function r(t){this.rules=null,this._messages=Bt,this.define(t)}var e=r.prototype;return e.define=function(n){var s=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(typeof n!="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(i){var o=n[i];s.rules[i]=Array.isArray(o)?o:[o]})},e.messages=function(n){return n&&(this._messages=jr(Nt(),n)),this._messages},e.validate=function(n,s,i){var o=this;s===void 0&&(s={}),i===void 0&&(i=function(){});var a=n,c=s,y=i;if(typeof c=="function"&&(y=c,c={}),!this.rules||Object.keys(this.rules).length===0)return y&&y(null,a),Promise.resolve(a);function u(l){var v=[],p={};function w(_){if(Array.isArray(_)){var T;v=(T=v).concat.apply(T,_)}else v.push(_)}for(var g=0;g<l.length;g++)w(l[g]);v.length?(p=kt(v),y(v,p)):y(null,a)}if(c.messages){var d=this.messages();d===Bt&&(d=Nt()),jr(d,c.messages),c.messages=d}else c.messages=this.messages();var b={},R=c.keys||Object.keys(this.rules);R.forEach(function(l){var v=o.rules[l],p=a[l];v.forEach(function(w){var g=w;typeof g.transform=="function"&&(a===n&&(a=we({},a)),p=a[l]=g.transform(p)),typeof g=="function"?g={validator:g}:g=we({},g),g.validator=o.getValidationMethod(g),g.validator&&(g.field=l,g.fullField=g.fullField||l,g.type=o.getType(g),b[l]=b[l]||[],b[l].push({rule:g,value:p,source:a,field:l}))})});var S={};return ec(b,c,function(l,v){var p=l.rule,w=(p.type==="object"||p.type==="array")&&(typeof p.fields=="object"||typeof p.defaultField=="object");w=w&&(p.required||!p.required&&l.value),p.field=l.field;function g(C,z){return we({},z,{fullField:p.fullField+"."+C,fullFields:p.fullFields?[].concat(p.fullFields,[C]):[C]})}function _(C){C===void 0&&(C=[]);var z=Array.isArray(C)?C:[C];!c.suppressWarning&&z.length&&r.warning("async-validator:",z),z.length&&p.message!==void 0&&(z=[].concat(p.message));var M=z.map(qr(p,a));if(c.first&&M.length)return S[p.field]=1,v(M);if(!w)v(M);else{if(p.required&&!l.value)return p.message!==void 0?M=[].concat(p.message).map(qr(p,a)):c.error&&(M=[c.error(p,Y(c.messages.required,p.field))]),v(M);var H={};p.defaultField&&Object.keys(l.value).map(function(W){H[W]=p.defaultField}),H=we({},H,l.rule.fields);var ue={};Object.keys(H).forEach(function(W){var U=H[W],Pe=Array.isArray(U)?U:[U];ue[W]=Pe.map(g.bind(null,W))});var G=new r(ue);G.messages(c.messages),l.rule.options&&(l.rule.options.messages=c.messages,l.rule.options.error=c.error),G.validate(l.value,l.rule.options||c,function(W){var U=[];M&&M.length&&U.push.apply(U,M),W&&W.length&&U.push.apply(U,W),v(U.length?U:null)})}}var T;if(p.asyncValidator)T=p.asyncValidator(p,l.value,_,l.source,c);else if(p.validator){try{T=p.validator(p,l.value,_,l.source,c)}catch(C){console.error==null||console.error(C),c.suppressValidatorError||setTimeout(function(){throw C},0),_(C.message)}T===!0?_():T===!1?_(typeof p.message=="function"?p.message(p.fullField||p.field):p.message||(p.fullField||p.field)+" fails"):T instanceof Array?_(T):T instanceof Error&&_(T.message)}T&&T.then&&T.then(function(){return _()},function(C){return _(C)})},function(l){u(l)},a)},e.getType=function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!ze.hasOwnProperty(n.type))throw new Error(Y("Unknown rule type %s",n.type));return n.type||"string"},e.getValidationMethod=function(n){if(typeof n.validator=="function")return n.validator;var s=Object.keys(n),i=s.indexOf("message");return i!==-1&&s.splice(i,1),s.length===1&&s[0]==="required"?ze.required:ze[this.getType(n)]||void 0},r}();He.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");ze[e]=t};He.warning=Xa;He.messages=Bt;He.validators=ze;const Ac=["","error","validating","success"],Tc=zt({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:Te([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Te([Object,Array])},error:String,validateStatus:{type:String,values:Ac},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:cn}}),Vr="ElLabelWrap";var Oc=ye({name:Vr,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(r,{slots:e}){const t=lt(Kt,void 0),n=lt(At);n||xa(Vr,"usage: <el-form-item><label-wrap /></el-form-item>");const s=We("form"),i=V(),o=V(0),a=()=>{var u;if((u=i.value)!=null&&u.firstElementChild){const d=window.getComputedStyle(i.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},c=u=>{be(()=>{e.default&&r.isAutoWidth&&(u==="update"?o.value=a():u==="remove"&&(t==null||t.deregisterLabelWidth(o.value)))})},y=()=>c("update");return ht(()=>{y()}),sn(()=>{c("remove")}),fs(()=>y()),xe(o,(u,d)=>{r.updateAll&&(t==null||t.registerLabelWidth(u,d))}),an(x(()=>{var u,d;return(d=(u=i.value)==null?void 0:u.firstElementChild)!=null?d:null}),y),()=>{var u,d;if(!e)return null;const{isAutoWidth:b}=r;if(b){const R=t==null?void 0:t.autoLabelWidth,S=n==null?void 0:n.hasLabel,l={};if(S&&R&&R!=="auto"){const v=Math.max(0,Number.parseInt(R,10)-o.value),p=t.labelPosition==="left"?"marginRight":"marginLeft";v&&(l[p]=`${v}px`)}return ie("div",{ref:i,class:[s.be("item","label-wrap")],style:l},[(u=e.default)==null?void 0:u.call(e)])}else return ie(Me,{ref:i},[(d=e.default)==null?void 0:d.call(e)])}}});const Sc=["role","aria-labelledby"],Cc=ye({name:"ElFormItem"}),Rc=ye(me(ee({},Cc),{props:Tc,setup(r,{expose:e}){const t=r,n=Jr(),s=lt(Kt,void 0),i=lt(At,void 0),o=Ut(void 0,{formItem:!1}),a=We("form-item"),c=Ts().value,y=V([]),u=V(""),d=ds(u,100),b=V(""),R=V();let S,l=!1;const v=x(()=>{if((s==null?void 0:s.labelPosition)==="top")return{};const m=pr(t.labelWidth||(s==null?void 0:s.labelWidth)||"");return m?{width:m}:{}}),p=x(()=>{if((s==null?void 0:s.labelPosition)==="top"||(s==null?void 0:s.inline))return{};if(!t.label&&!t.labelWidth&&H)return{};const m=pr(t.labelWidth||(s==null?void 0:s.labelWidth)||"");return!t.label&&!n.label?{marginLeft:m}:{}}),w=x(()=>[a.b(),a.m(o.value),a.is("error",u.value==="error"),a.is("validating",u.value==="validating"),a.is("success",u.value==="success"),a.is("required",Pe.value||t.required),a.is("no-asterisk",s==null?void 0:s.hideRequiredAsterisk),(s==null?void 0:s.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[a.m("feedback")]:s==null?void 0:s.statusIcon}]),g=x(()=>en(t.inlineMessage)?t.inlineMessage:(s==null?void 0:s.inlineMessage)||!1),_=x(()=>[a.e("error"),{[a.em("error","inline")]:g.value}]),T=x(()=>t.prop?Oe(t.prop)?t.prop:t.prop.join("."):""),C=x(()=>!!(t.label||n.label)),z=x(()=>t.for||y.value.length===1?y.value[0]:void 0),M=x(()=>!z.value&&C.value),H=!!i,ue=x(()=>{const m=s==null?void 0:s.model;if(!(!m||!t.prop))return wt(m,t.prop).value}),G=x(()=>{const{required:m}=t,O=[];t.rules&&O.push(...Ot(t.rules));const B=s==null?void 0:s.rules;if(B&&t.prop){const N=wt(B,t.prop).value;N&&O.push(...Ot(N))}if(m!==void 0){const N=O.map((K,Q)=>[K,Q]).filter(([K])=>Object.keys(K).includes("required"));if(N.length>0)for(const[K,Q]of N)K.required!==m&&(O[Q]=me(ee({},K),{required:m}));else O.push({required:m})}return O}),W=x(()=>G.value.length>0),U=m=>G.value.filter(B=>!B.trigger||!m?!0:Array.isArray(B.trigger)?B.trigger.includes(m):B.trigger===m).map(K=>{var Q=K,{trigger:B}=Q,N=lr(Q,["trigger"]);return N}),Pe=x(()=>G.value.some(m=>m.required)),Ye=x(()=>{var m;return d.value==="error"&&t.showMessage&&((m=s==null?void 0:s.showMessage)!=null?m:!0)}),J=x(()=>`${t.label||""}${(s==null?void 0:s.labelSuffix)||""}`),Z=m=>{u.value=m},$e=m=>{var O,B;const{errors:N,fields:K}=m;(!N||!K)&&console.error(m),Z("error"),b.value=N?(B=(O=N==null?void 0:N[0])==null?void 0:O.message)!=null?B:`${t.prop} is required`:"",s==null||s.emit("validate",t.prop,!1,b.value)},fe=()=>{Z("success"),s==null||s.emit("validate",t.prop,!0,"")},ke=async m=>{const O=T.value;return new He({[O]:m}).validate({[O]:ue.value},{firstFields:!0}).then(()=>(fe(),!0)).catch(N=>($e(N),Promise.reject(N)))},Ge=async(m,O)=>{if(l||!t.prop)return!1;const B=nn(O);if(!W.value)return O==null||O(!1),!1;const N=U(m);return N.length===0?(O==null||O(!0),!0):(Z("validating"),ke(N).then(()=>(O==null||O(!0),!0)).catch(K=>{const{fields:Q}=K;return O==null||O(!1,Q),B?!1:Promise.reject(Q)}))},Ne=()=>{Z(""),b.value="",l=!1},Xe=async()=>{const m=s==null?void 0:s.model;if(!m||!t.prop)return;const O=wt(m,t.prop);l=!0,O.value=Nr(S),await be(),Ne(),l=!1},gt=m=>{y.value.includes(m)||y.value.push(m)},Ee=m=>{y.value=y.value.filter(O=>O!==m)};xe(()=>t.error,m=>{b.value=m||"",Z(m?"error":"")},{immediate:!0}),xe(()=>t.validateStatus,m=>Z(m||""));const ce=Ve(me(ee({},rn(t)),{$el:R,size:o,validateState:u,labelId:c,inputIds:y,isGroup:M,hasLabel:C,addInputId:gt,removeInputId:Ee,resetField:Xe,clearValidate:Ne,validate:Ge}));return tn(At,ce),ht(()=>{t.prop&&(s==null||s.addField(ce),S=Nr(ue.value))}),sn(()=>{s==null||s.removeField(ce)}),e({size:o,validateMessage:b,validateState:u,validate:Ge,clearValidate:Ne,resetField:Xe}),(m,O)=>{var B;return P(),D("div",{ref_key:"formItemRef",ref:R,class:L(h(w)),role:h(M)?"group":void 0,"aria-labelledby":h(M)?h(c):void 0},[ie(h(Oc),{"is-auto-width":h(v).width==="auto","update-all":((B=h(s))==null?void 0:B.labelWidth)==="auto"},{default:X(()=>[h(C)?(P(),ne(Le(h(z)?"label":"div"),{key:0,id:h(c),for:h(z),class:L(h(a).e("label")),style:Et(h(v))},{default:X(()=>[de(m.$slots,"label",{label:h(J)},()=>[on(he(h(J)),1)])]),_:3},8,["id","for","class","style"])):I("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),se("div",{class:L(h(a).e("content")),style:Et(h(p))},[de(m.$slots,"default"),ie(hs,{name:`${h(a).namespace.value}-zoom-in-top`},{default:X(()=>[h(Ye)?de(m.$slots,"error",{key:0,error:b.value},()=>[se("div",{class:L(h(_))},he(b.value),3)]):I("v-if",!0)]),_:3},8,["name"])],6)],10,Sc)}}}));var Sn=Wt(Rc,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const Fc=Qr(Ua,{FormItem:Sn}),Pc=ps(Sn);const ae=Object.create(null);ae.open="0";ae.close="1";ae.ping="2";ae.pong="3";ae.message="4";ae.upgrade="5";ae.noop="6";const it=Object.create(null);Object.keys(ae).forEach(r=>{it[ae[r]]=r});const $c={type:"error",data:"parser error"},kc=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Nc=typeof ArrayBuffer=="function",Bc=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,Cn=({type:r,data:e},t,n)=>kc&&e instanceof Blob?t?n(e):Dr(e,n):Nc&&(e instanceof ArrayBuffer||Bc(e))?t?n(e):Dr(new Blob([e]),n):n(ae[r]+(e||"")),Dr=(r,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+n)},t.readAsDataURL(r)},zr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",je=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(let r=0;r<zr.length;r++)je[zr.charCodeAt(r)]=r;const Ic=r=>{let e=r.length*.75,t=r.length,n,s=0,i,o,a,c;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);const y=new ArrayBuffer(e),u=new Uint8Array(y);for(n=0;n<t;n+=4)i=je[r.charCodeAt(n)],o=je[r.charCodeAt(n+1)],a=je[r.charCodeAt(n+2)],c=je[r.charCodeAt(n+3)],u[s++]=i<<2|o>>4,u[s++]=(o&15)<<4|a>>2,u[s++]=(a&3)<<6|c&63;return y},Lc=typeof ArrayBuffer=="function",Rn=(r,e)=>{if(typeof r!="string")return{type:"message",data:Fn(r,e)};const t=r.charAt(0);return t==="b"?{type:"message",data:qc(r.substring(1),e)}:it[t]?r.length>1?{type:it[t],data:r.substring(1)}:{type:it[t]}:$c},qc=(r,e)=>{if(Lc){const t=Ic(r);return Fn(t,e)}else return{base64:!0,data:r}},Fn=(r,e)=>{switch(e){case"blob":return r instanceof ArrayBuffer?new Blob([r]):r;case"arraybuffer":default:return r}},Pn=String.fromCharCode(30),jc=(r,e)=>{const t=r.length,n=new Array(t);let s=0;r.forEach((i,o)=>{Cn(i,!1,a=>{n[o]=a,++s===t&&e(n.join(Pn))})})},Mc=(r,e)=>{const t=r.split(Pn),n=[];for(let s=0;s<t.length;s++){const i=Rn(t[s],e);if(n.push(i),i.type==="error")break}return n},$n=4;function q(r){if(r)return Vc(r)}function Vc(r){for(var e in q.prototype)r[e]=q.prototype[e];return r}q.prototype.on=q.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};q.prototype.once=function(r,e){function t(){this.off(r,t),e.apply(this,arguments)}return t.fn=e,this.on(r,t),this};q.prototype.off=q.prototype.removeListener=q.prototype.removeAllListeners=q.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+r];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var n,s=0;s<t.length;s++)if(n=t[s],n===e||n.fn===e){t.splice(s,1);break}return t.length===0&&delete this._callbacks["$"+r],this};q.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+r],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,s=t.length;n<s;++n)t[n].apply(this,e)}return this};q.prototype.emitReserved=q.prototype.emit;q.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};q.prototype.hasListeners=function(r){return!!this.listeners(r).length};const pe=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function kn(r,...e){return e.reduce((t,n)=>(r.hasOwnProperty(n)&&(t[n]=r[n]),t),{})}const Dc=setTimeout,zc=clearTimeout;function yt(r,e){e.useNativeTimers?(r.setTimeoutFn=Dc.bind(pe),r.clearTimeoutFn=zc.bind(pe)):(r.setTimeoutFn=setTimeout.bind(pe),r.clearTimeoutFn=clearTimeout.bind(pe))}const Wc=1.33;function Uc(r){return typeof r=="string"?Kc(r):Math.ceil((r.byteLength||r.size)*Wc)}function Kc(r){let e=0,t=0;for(let n=0,s=r.length;n<s;n++)e=r.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}class Hc extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class Nn extends q{constructor(e){super(),this.writable=!1,yt(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t,n){return super.emitReserved("error",new Hc(e,t,n)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Rn(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}}const Bn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),It=64,Yc={};let Wr=0,tt=0,Ur;function Kr(r){let e="";do e=Bn[r%It]+e,r=Math.floor(r/It);while(r>0);return e}function In(){const r=Kr(+new Date);return r!==Ur?(Wr=0,Ur=r):r+"."+Kr(Wr++)}for(;tt<It;tt++)Yc[Bn[tt]]=tt;function Ln(r){let e="";for(let t in r)r.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(r[t]));return e}function Gc(r){let e={},t=r.split("&");for(let n=0,s=t.length;n<s;n++){let i=t[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}let qn=!1;try{qn=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{}const Xc=qn;function jn(r){const e=r.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!e||Xc))return new XMLHttpRequest}catch{}if(!e)try{return new pe[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function Jc(){}const Zc=function(){return new jn({xdomain:!1}).responseType!=null}();class Qc extends Nn{constructor(e){if(super(e),this.polling=!1,typeof location!="undefined"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location!="undefined"&&e.hostname!==location.hostname||s!==e.port,this.xs=e.secure!==n}const t=e&&e.forceBase64;this.supportsBinary=Zc&&!t}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Mc(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,jc(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let n="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=In()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(t==="https"&&Number(this.opts.port)!==443||t==="http"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port);const s=Ln(e),i=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(s.length?"?"+s:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new oe(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}class oe extends q{constructor(e,t){super(),yt(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=t.async!==!1,this.data=t.data!==void 0?t.data:null,this.create()}create(){const e=kn(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new jn(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let n in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(n)&&t.setRequestHeader(n,this.opts.extraHeaders[n])}}catch{}if(this.method==="POST")try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{t.readyState===4&&(t.status===200||t.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof t.status=="number"?t.status:0)},0))},t.send(this.data)}catch(n){this.setTimeoutFn(()=>{this.onError(n)},0);return}typeof document!="undefined"&&(this.index=oe.requestsCount++,oe.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=Jc,e)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete oe.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}oe.requestsCount=0;oe.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",Hr);else if(typeof addEventListener=="function"){const r="onpagehide"in pe?"pagehide":"unload";addEventListener(r,Hr,!1)}}function Hr(){for(let r in oe.requests)oe.requests.hasOwnProperty(r)&&oe.requests[r].abort()}const Mn=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0))(),rt=pe.WebSocket||pe.MozWebSocket,Yr=!0,el="arraybuffer",Gr=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class tl extends Nn{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=Gr?{}:kn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Yr&&!Gr?t?new rt(e,t):new rt(e):new rt(e,t,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType||el,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],s=t===e.length-1;Cn(n,this.supportsBinary,i=>{const o={};try{Yr&&this.ws.send(i)}catch{}s&&Mn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let n="";this.opts.port&&(t==="wss"&&Number(this.opts.port)!==443||t==="ws"&&Number(this.opts.port)!==80)&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=In()),this.supportsBinary||(e.b64=1);const s=Ln(e),i=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(i?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(s.length?"?"+s:"")}check(){return!!rt}}const rl={websocket:tl,polling:Qc},nl=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,sl=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Lt(r){const e=r,t=r.indexOf("["),n=r.indexOf("]");t!=-1&&n!=-1&&(r=r.substring(0,t)+r.substring(t,n).replace(/:/g,";")+r.substring(n,r.length));let s=nl.exec(r||""),i={},o=14;for(;o--;)i[sl[o]]=s[o]||"";return t!=-1&&n!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=il(i,i.path),i.queryKey=ol(i,i.query),i}function il(r,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function ol(r,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,i){s&&(t[s]=i)}),t}class le extends q{constructor(e,t={}){super(),e&&typeof e=="object"&&(t=e,e=null),e?(e=Lt(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=Lt(t.host).host),yt(this,t),this.secure=t.secure!=null?t.secure:typeof location!="undefined"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=t.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=Gc(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=$n,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new rl[e](n)}open(){let e;if(this.opts.rememberUpgrade&&le.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",t=>this.onClose("transport close",t))}probe(e){let t=this.createTransport(e),n=!1;le.priorWebsocketSuccess=!1;const s=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",d=>{if(!n)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;le.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=t.name,this.emitReserved("upgradeError",b)}}))};function i(){n||(n=!0,u(),t.close(),t=null)}const o=d=>{const b=new Error("probe error: "+d);b.transport=t.name,i(),this.emitReserved("upgradeError",b)};function a(){o("transport closed")}function c(){o("socket closed")}function y(d){t&&d.name!==t.name&&i()}const u=()=>{t.removeListener("open",s),t.removeListener("error",o),t.removeListener("close",a),this.off("close",c),this.off("upgrading",y)};t.once("open",s),t.once("error",o),t.once("close",a),this.once("close",c),this.once("upgrading",y),t.open()}onOpen(){if(this.readyState="open",le.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(t+=Uc(s)),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,s){if(typeof t=="function"&&(s=t,t=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}onError(e){le.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let n=0;const s=e.length;for(;n<s;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}le.protocol=$n;le.protocol;function al(r,e="",t){let n=r;t=t||typeof location!="undefined"&&location,r==null&&(r=t.protocol+"//"+t.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=t.protocol+r:r=t.host+r),/^(https?|wss?):\/\//.test(r)||(typeof t!="undefined"?r=t.protocol+"//"+r:r="https://"+r),n=Lt(r)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+e,n.href=n.protocol+"://"+i+(t&&t.port===n.port?"":":"+n.port),n}const cl=typeof ArrayBuffer=="function",ll=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,Vn=Object.prototype.toString,ul=typeof Blob=="function"||typeof Blob!="undefined"&&Vn.call(Blob)==="[object BlobConstructor]",fl=typeof File=="function"||typeof File!="undefined"&&Vn.call(File)==="[object FileConstructor]";function er(r){return cl&&(r instanceof ArrayBuffer||ll(r))||ul&&r instanceof Blob||fl&&r instanceof File}function ot(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let t=0,n=r.length;t<n;t++)if(ot(r[t]))return!0;return!1}if(er(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return ot(r.toJSON(),!0);for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&ot(r[t]))return!0;return!1}function dl(r){const e=[],t=r.data,n=r;return n.data=qt(t,e),n.attachments=e.length,{packet:n,buffers:e}}function qt(r,e){if(!r)return r;if(er(r)){const t={_placeholder:!0,num:e.length};return e.push(r),t}else if(Array.isArray(r)){const t=new Array(r.length);for(let n=0;n<r.length;n++)t[n]=qt(r[n],e);return t}else if(typeof r=="object"&&!(r instanceof Date)){const t={};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=qt(r[n],e));return t}return r}function hl(r,e){return r.data=jt(r.data,e),r.attachments=void 0,r}function jt(r,e){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<e.length)return e[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let t=0;t<r.length;t++)r[t]=jt(r[t],e);else if(typeof r=="object")for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(r[t]=jt(r[t],e));return r}const pl=5;var A;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(A||(A={}));class yl{constructor(e){this.replacer=e}encode(e){return(e.type===A.EVENT||e.type===A.ACK)&&ot(e)?(e.type=e.type===A.EVENT?A.BINARY_EVENT:A.BINARY_ACK,this.encodeAsBinary(e)):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===A.BINARY_EVENT||e.type===A.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=dl(e),n=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(n),s}}class tr extends q{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e),t.type===A.BINARY_EVENT||t.type===A.BINARY_ACK?(this.reconstructor=new gl(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(er(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(A[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===A.BINARY_EVENT||n.type===A.BINARY_ACK){const i=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const o=e.substring(i,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(e.charAt(t+1)==="/"){const i=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(i,t)}else n.nsp="/";const s=e.charAt(t+1);if(s!==""&&Number(s)==s){const i=t+1;for(;++t;){const o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(tr.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case A.CONNECT:return typeof t=="object";case A.DISCONNECT:return t===void 0;case A.CONNECT_ERROR:return typeof t=="string"||typeof t=="object";case A.EVENT:case A.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case A.ACK:case A.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class gl{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=hl(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var ml=Object.freeze(Object.defineProperty({__proto__:null,protocol:pl,get PacketType(){return A},Encoder:yl,Decoder:tr},Symbol.toStringTag,{value:"Module"}));function re(r,e,t){return r.on(e,t),function(){r.off(e,t)}}const vl=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Dn extends q{constructor(e,t,n){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[re(e,"open",this.onopen.bind(this)),re(e,"packet",this.onpacket.bind(this)),re(e,"error",this.onerror.bind(this)),re(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(vl.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');t.unshift(e);const n={type:A.EVENT,data:t};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const o=this.ids++,a=t.pop();this._registerAckCallback(o,a),n.id=o}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,t){const n=this.flags.timeout;if(n===void 0){this.acks[e]=t;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let i=0;i<this.sendBuffer.length;i++)this.sendBuffer[i].id===e&&this.sendBuffer.splice(i,1);t.call(this,new Error("operation has timed out"))},n);this.acks[e]=(...i)=>{this.io.clearTimeoutFn(s),t.apply(this,[null,...i])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this.packet({type:A.CONNECT,data:e})}):this.packet({type:A.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case A.CONNECT:if(e.data&&e.data.sid){const s=e.data.sid;this.onconnect(s)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case A.EVENT:case A.BINARY_EVENT:this.onevent(e);break;case A.ACK:case A.BINARY_ACK:this.onack(e);break;case A.DISCONNECT:this.ondisconnect();break;case A.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let n=!1;return function(...s){n||(n=!0,t.packet({type:A.ACK,id:e,data:s}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:A.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Fe(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}Fe.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*r);r=(Math.floor(e*10)&1)==0?r-t:r+t}return Math.min(r,this.max)|0};Fe.prototype.reset=function(){this.attempts=0};Fe.prototype.setMin=function(r){this.ms=r};Fe.prototype.setMax=function(r){this.max=r};Fe.prototype.setJitter=function(r){this.jitter=r};class Mt extends q{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,yt(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Fe({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||ml;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new le(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=re(t,"open",function(){n.onopen(),e&&e()}),i=re(t,"error",o=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",o),e?e(o):n.maybeReconnectOnOpen()});if(this._timeout!==!1){const o=this._timeout;o===0&&s();const a=this.setTimeoutFn(()=>{s(),t.close(),t.emit("error",new Error("timeout"))},o);this.opts.autoUnref&&a.unref(),this.subs.push(function(){clearTimeout(a)})}return this.subs.push(s),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(re(e,"ping",this.onping.bind(this)),re(e,"data",this.ondata.bind(this)),re(e,"error",this.onerror.bind(this)),re(e,"close",this.onclose.bind(this)),re(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Mn(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n||(n=new Dn(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ie={};function at(r,e){typeof r=="object"&&(e=r,r=void 0),e=e||{};const t=al(r,e.path||"/socket.io"),n=t.source,s=t.id,i=t.path,o=Ie[s]&&i in Ie[s].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return a?c=new Mt(n,e):(Ie[s]||(Ie[s]=new Mt(n,e)),c=Ie[s]),t.query&&!e.query&&(e.query=t.queryKey),c.socket(t.path,e)}Object.assign(at,{Manager:Mt,Socket:Dn,io:at,connect:at});const bl={class:"ChatRoom"},wl={class:"wsMsg"},xl={id:"messages"},_l=ye({__name:"index",setup(r){const e=V(""),t=V(),n=(y,u,d)=>{if(u==="")return d(new Error("Please input the message"));setTimeout(()=>{d()},500)},s=Ve({message:""}),i=Ve({message:[{validator:n,trigger:"blur"}]}),o=y=>{!y||y.validate(u=>{var d;if(u&&a.value)a.value.emit("chat message",s.message),(d=t.value)==null||d.resetFields();else return console.log("error submit!"),!1})},a=V(),c=Ve({list:[]});return ht(()=>{const y=window.location.hostname;a.value=at(`https://${y}:6789`),a.value.on("connect",()=>{var u,d;e.value=`\u7528\u6237ID: ${(u=a.value)==null?void 0:u.id}`,console.log((d=a.value)==null?void 0:d.id)}),a.value.on("connect_error",()=>{setTimeout(()=>{e.value="\u9519\u8BEF\u4FE1\u606F: Connect_Error"},2e3)}),a.value.on("disconnect",()=>{var u;console.log((u=a.value)==null?void 0:u.id)}),a.value.on("message",u=>{c.list.push(u)})}),ys(()=>{a.value&&a.value.close()}),(y,u)=>{const d=qa,b=Pc,R=Os,S=Fc;return P(),D("div",bl,[se("div",wl,he(e.value),1),se("ul",xl,[(P(!0),D(Me,null,gs(c.list,(l,v)=>(P(),D("li",{key:v},he(l),1))),128))]),ie(S,{ref_key:"wsFormRef",ref:t,model:s,"status-icon":"",rules:i,"label-width":"120px",class:"wsForm",size:"large",inline:!0,onSubmit:u[2]||(u[2]=Zr(()=>{},["prevent"]))},{default:X(()=>[ie(b,{prop:"message",class:"message"},{default:X(()=>[ie(d,{modelValue:s.message,"onUpdate:modelValue":u[0]||(u[0]=l=>s.message=l),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),ie(b,{class:"sumbit"},{default:X(()=>[ie(R,{type:"primary",onClick:u[1]||(u[1]=l=>o(t.value)),"native-type":"submit"},{default:X(()=>[on(" \u53D1\u9001 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}});var Sl=Ss(_l,[["__scopeId","data-v-7ba472c7"]]);export{Sl as default};
