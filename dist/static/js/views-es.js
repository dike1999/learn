import{d as S,r as g,a as k,c as h,b as p,e as $,t as b,o as w,p as j,f as B,g as f,w as y,u as P,E as R,h as T,i as E,S as L,P as G,W as V,C as z,A as U,j as D,M as I,k as O,B as W,l as A,m as H,n as N,F as q,q as J,s as K,v as Q,x as X,y as Y}from"./vendor-es.js";const F=o=>(j("data-v-45838999"),o=o(),B(),o),Z={class:"home"},ee=F(()=>p("h1",null,"home page",-1)),te=F(()=>p("br",null,null,-1)),oe=S({__name:"index",setup(o){const s=g(0),n=k({nested:{count:0},arr:["foo","bar"]}),r=()=>{s.value++,n.nested.count+=2};return(i,_)=>(w(),h("div",Z,[ee,p("div",{class:"count",id:"count",onClick:r},[$(" Click "),p("span",null,b(s.value),1),te,p("span",null,b(n.nested.count),1)])]))}});const C=(o,s)=>{const n=o.__vccOpts||o;for(const[r,i]of s)n[r]=i;return n},ne=C(oe,[["__scopeId","data-v-45838999"]]),Me=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"})),se=o=>(j("data-v-bb7e5c32"),o=o(),B(),o),ae={class:"webrtc-container"},re=se(()=>p("div",{class:"local-video"},[p("video",{id:"localVideo",autoplay:"",playsinline:"",muted:""})],-1)),ce={class:"control"},le=S({__name:"record",setup(o){function s(c=n){const l=document.querySelector("#localVideo");l.srcObject=c,l.onloadedmetadata=()=>{l.play()}}let n;async function r(){n=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),s(),_.value=!0}function i(){n.getTracks().forEach(c=>{c.stop()}),_.value=!1}let _=g(!1);function x(){_.value?i():r()}async function a(){n=await navigator.mediaDevices.getDisplayMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:{width:1920,height:1080,frameRate:60,aspectRatio:16/9}}),s()}const v=g(0);let e;function t(){if(!n){R.warning("请先获取本地音视频流");return}if((e==null?void 0:e.state)==="recording"){e.stop();return}const c={audioBitsPerSecond:128e3,videoBitsPerSecond:25e5,mimeType:'video/webm; codecs="vp8,opus"'},l=[];let u;e=new MediaRecorder(n,c),e.start(),e.ondataavailable=m=>{l.push(m.data)},e.onstart=()=>{u=setInterval(()=>{v.value++},1e3)},e.onstop=()=>{v.value=0,clearInterval(u);const m=new Blob(l,{type:e==null?void 0:e.mimeType});d(m),l.length=0}}function d(c){const l=URL.createObjectURL(c),u=document.createElement("a");u.href=l,u.download=`${new Date().getTime()}.${c.type.split("/")[1].split(";")[0]}`,u.click(),URL.revokeObjectURL(l)}return(c,l)=>{const u=T;return w(),h("div",ae,[re,p("div",ce,[p("div",null,[f(u,{type:P(_)?"warning":"primary",onClick:x},{default:y(()=>[$(b(P(_)?"关闭摄像头":"打开摄像头"),1)]),_:1},8,["type"]),f(u,{type:"primary",onClick:a},{default:y(()=>[$("分享屏幕")]),_:1}),f(u,{type:v.value===0?"success":"warning",onClick:t},{default:y(()=>[$(b(v.value===0?" 开始录制":"终止录制 | "+v.value),1)]),_:1},8,["type"])])])])}}});const ie=C(le,[["__scopeId","data-v-bb7e5c32"]]),ke=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"})),de=S({__name:"FirstScene",setup(o){const s=g();function n(){var M;const r=new L,i=new G(45,window.innerWidth/window.innerHeight,.1,1e3),_=new V;_.setClearColor(new z(0)),_.setSize(window.innerWidth,window.innerHeight);const x=new U(20);r.add(x);const a=new D(60,20),v=new I({color:11184810}),e=new O(a,v);e.rotation.x=-.5*Math.PI,e.position.set(15,0,0),r.add(e);const t=new W(4,4,4),d=new I({color:16711680,wireframe:!0}),c=new O(t,d);c.position.set(-4,3,0),r.add(c);const l=new A(4,20,20),u=new I({color:7829503,wireframe:!0}),m=new O(l,u);m.position.set(20,4,2),r.add(m),i.position.set(-30,40,30),i.lookAt(r.position),(M=s.value)==null||M.appendChild(_.domElement),_.render(r,i)}return E(()=>{n()}),g("BasicSkeleton"),(r,i)=>(w(),h("div",{class:"three",ref_key:"threeRef",ref:s},null,512))}}),ue={style:{position:"absolute",top:"0"}},_e=S({__name:"index",setup(o){return(s,n)=>(w(),h("div",ue,[f(de)]))}}),Ce=Object.freeze(Object.defineProperty({__proto__:null,default:_e},Symbol.toStringTag,{value:"Module"})),pe={class:"ChatRoom"},me={class:"wsMsg"},ve={id:"messages"},fe=S({__name:"index",setup(o){const s=g(""),n=g(),r=(e,t,d)=>{if(t==="")return d(new Error("Please input the message"));setTimeout(()=>{d()},500)},i=k({message:""}),_=k({message:[{validator:r,trigger:"blur"}]}),x=e=>{e&&e.validate(t=>{var d;if(t&&a.value)a.value.emit("chat message",i.message),(d=n.value)==null||d.resetFields();else return console.log("error submit!"),!1})},a=g(),v=k({list:[]});return E(()=>{const e=window.location.hostname;a.value=H(`https://${e}:6789`),a.value.on("connect",()=>{var t,d;s.value=`用户ID: ${(t=a.value)==null?void 0:t.id}`,console.log((d=a.value)==null?void 0:d.id)}),a.value.on("connect_error",()=>{setTimeout(()=>{s.value="错误信息: Connect_Error"},2e3)}),a.value.on("disconnect",()=>{var t;console.log((t=a.value)==null?void 0:t.id)}),a.value.on("message",t=>{v.list.push(t)})}),N(()=>{a.value&&a.value.close()}),(e,t)=>{const d=X,c=Y,l=T,u=Q;return w(),h("div",pe,[p("div",me,b(s.value),1),p("ul",ve,[(w(!0),h(q,null,J(v.list,(m,M)=>(w(),h("li",{key:M},b(m),1))),128))]),f(u,{ref_key:"wsFormRef",ref:n,model:i,"status-icon":"",rules:_,"label-width":"120px",class:"wsForm",size:"large",inline:!0,onSubmit:t[2]||(t[2]=K(()=>{},["prevent"]))},{default:y(()=>[f(c,{prop:"message",class:"message"},{default:y(()=>[f(d,{modelValue:i.message,"onUpdate:modelValue":t[0]||(t[0]=m=>i.message=m),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),f(c,{class:"sumbit"},{default:y(()=>[f(l,{type:"primary",onClick:t[1]||(t[1]=m=>x(n.value)),"native-type":"submit"},{default:y(()=>[$(" 发送 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}});const ge=C(fe,[["__scopeId","data-v-39f7a668"]]),Ie=Object.freeze(Object.defineProperty({__proto__:null,default:ge},Symbol.toStringTag,{value:"Module"})),he=o=>(j("data-v-18dd3adc"),o=o(),B(),o),we={class:"rabbit"},ye=he(()=>p("h1",null,"rabbit page",-1)),be=[ye],Se=S({__name:"index",setup(o){return(s,n)=>(w(),h("div",we,be))}});const xe=C(Se,[["__scopeId","data-v-18dd3adc"]]),Oe=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"}));export{Ce as a,Ie as b,Oe as c,Me as i,ke as r};
