import{d as $,r as b,a as k,c as w,b as p,e as S,t as x,o as h,p as C,f as B,g,w as y,u as M,E as z,h as E,i as I,S as R,P as T,W as L,B as P,M as V,j as U,k as D,l as W,m as q,F as A,n as G,q as N,s as H,v as J,x as K}from"./vendor-es.js";const O=c=>(C("data-v-45838999"),c=c(),B(),c),Q={class:"home"},X=O(()=>p("h1",null,"home page",-1)),Y=O(()=>p("br",null,null,-1)),Z=$({__name:"index",setup(c){const i=b(0),e=k({nested:{count:0},arr:["foo","bar"]}),v=()=>{i.value++,e.nested.count+=2};return(n,l)=>(h(),w("div",Q,[X,p("div",{class:"count",id:"count",onClick:v},[S(" Click "),p("span",null,x(i.value),1),Y,p("span",null,x(e.nested.count),1)])]))}});const F=(c,i)=>{const e=c.__vccOpts||c;for(const[v,n]of i)e[v]=n;return e},ee=F(Z,[["__scopeId","data-v-45838999"]]),ve=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"})),te=c=>(C("data-v-bb7e5c32"),c=c(),B(),c),oe={class:"webrtc-container"},ne=te(()=>p("div",{class:"local-video"},[p("video",{id:"localVideo",autoplay:"",playsinline:"",muted:""})],-1)),ae={class:"control"},se=$({__name:"record",setup(c){function i(u=e){const s=document.querySelector("#localVideo");s.srcObject=u,s.onloadedmetadata=()=>{s.play()}}let e;async function v(){e=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),i(),l.value=!0}function n(){e.getTracks().forEach(u=>{u.stop()}),l.value=!1}let l=b(!1);function f(){l.value?n():v()}async function a(){e=await navigator.mediaDevices.getDisplayMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:{width:1920,height:1080,frameRate:60,aspectRatio:16/9}}),i()}const _=b(0);let o;function t(){if(!e){z.warning("请先获取本地音视频流");return}if((o==null?void 0:o.state)==="recording"){o.stop();return}const u={audioBitsPerSecond:128e3,videoBitsPerSecond:25e5,mimeType:'video/webm; codecs="vp8,opus"'},s=[];let d;o=new MediaRecorder(e,u),o.start(),o.ondataavailable=m=>{s.push(m.data)},o.onstart=()=>{d=setInterval(()=>{_.value++},1e3)},o.onstop=()=>{_.value=0,clearInterval(d);const m=new Blob(s,{type:o==null?void 0:o.mimeType});r(m),s.length=0}}function r(u){const s=URL.createObjectURL(u),d=document.createElement("a");d.href=s,d.download=`${new Date().getTime()}.${u.type.split("/")[1].split(";")[0]}`,d.click(),URL.revokeObjectURL(s)}return(u,s)=>{const d=E;return h(),w("div",oe,[ne,p("div",ae,[p("div",null,[g(d,{type:M(l)?"warning":"primary",onClick:f},{default:y(()=>[S(x(M(l)?"关闭摄像头":"打开摄像头"),1)]),_:1},8,["type"]),g(d,{type:"primary",onClick:a},{default:y(()=>[S("分享屏幕")]),_:1}),g(d,{type:_.value===0?"success":"warning",onClick:t},{default:y(()=>[S(x(_.value===0?" 开始录制":"终止录制 | "+_.value),1)]),_:1},8,["type"])])])])}}});const re=F(se,[["__scopeId","data-v-bb7e5c32"]]),fe=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"})),ce=$({__name:"demo1",setup(c){const i=b(),e=(n,l)=>{const f=new P(...n),a=new V(l);return new U(f,a)},v=()=>{var m;const n=new R,l=e([1,1,1],{color:"#433F81"});n.add(l);const f=e([1,1,1],{color:"#A49FEF",wireframe:!0,transparent:!0});n.add(f);const a=e([3,3,3],{color:"#433F81",wireframe:!0,transparent:!0});n.add(a);const _=e([1,1,1],{color:"#A49FEF"});n.add(_);const o=e([3,3,3],{color:"#433F81",wireframe:!0,transparent:!0});n.add(o);const t=e([10,.05,.5],{color:"#00FFBC"});t.position.z=.5,n.add(t);const r=e([10,.05,.5],{color:"#ffffff"});r.position.z=.5,n.add(r);const u=new T(75,window.innerWidth/window.innerHeight,.1,1e3);u.position.z=4;const s=new L({antialias:!0});s.setClearColor("#000"),s.setSize(window.innerWidth,window.innerHeight-36),(m=i.value)==null||m.appendChild(s.domElement);const d=()=>{requestAnimationFrame(d),l.rotation.x+=.01,l.rotation.y+=.01,f.rotation.x+=.01,f.rotation.y+=.01,a.rotation.x+=.01,a.rotation.y+=.01,_.rotation.x-=.01,_.rotation.y-=.01,o.rotation.x-=.01,o.rotation.y-=.01,t.rotation.z-=.01,r.rotation.z+=.01,s.render(n,u)};d()};return I(()=>{v()}),(n,l)=>(h(),w("div",{class:"three",ref_key:"threeRef",ref:i},null,512))}}),ie=$({__name:"index",setup(c){return(i,e)=>(h(),D(ce))}}),ge=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"})),le={class:"ChatRoom"},ue={class:"wsMsg"},de={id:"messages"},_e=$({__name:"index",setup(c){const i=b(""),e=b(),v=(o,t,r)=>{if(t==="")return r(new Error("Please input the message"));setTimeout(()=>{r()},500)},n=k({message:""}),l=k({message:[{validator:v,trigger:"blur"}]}),f=o=>{o&&o.validate(t=>{var r;if(t&&a.value)a.value.emit("chat message",n.message),(r=e.value)==null||r.resetFields();else return console.log("error submit!"),!1})},a=b(),_=k({list:[]});return I(()=>{const o=window.location.hostname;a.value=W(`https://${o}:6789`),a.value.on("connect",()=>{var t,r;i.value=`用户ID: ${(t=a.value)==null?void 0:t.id}`,console.log((r=a.value)==null?void 0:r.id)}),a.value.on("connect_error",()=>{setTimeout(()=>{i.value="错误信息: Connect_Error"},2e3)}),a.value.on("disconnect",()=>{var t;console.log((t=a.value)==null?void 0:t.id)}),a.value.on("message",t=>{_.list.push(t)})}),q(()=>{a.value&&a.value.close()}),(o,t)=>{const r=J,u=K,s=E,d=H;return h(),w("div",le,[p("div",ue,x(i.value),1),p("ul",de,[(h(!0),w(A,null,G(_.list,(m,j)=>(h(),w("li",{key:j},x(m),1))),128))]),g(d,{ref_key:"wsFormRef",ref:e,model:n,"status-icon":"",rules:l,"label-width":"120px",class:"wsForm",size:"large",inline:!0,onSubmit:t[2]||(t[2]=N(()=>{},["prevent"]))},{default:y(()=>[g(u,{prop:"message",class:"message"},{default:y(()=>[g(r,{modelValue:n.message,"onUpdate:modelValue":t[0]||(t[0]=m=>n.message=m),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),g(u,{class:"sumbit"},{default:y(()=>[g(s,{type:"primary",onClick:t[1]||(t[1]=m=>f(e.value)),"native-type":"submit"},{default:y(()=>[S(" 发送 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}});const me=F(_e,[["__scopeId","data-v-39f7a668"]]),ye=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"}));export{ge as a,ye as b,ve as i,fe as r};
