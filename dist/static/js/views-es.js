import{d as $,r as g,a as k,c as y,b as p,e as S,t as x,o as w,p as P,f as T,g as f,w as h,u as B,E,h as j,i as F,S as z,P as G,W as V,C as U,A as D,j as W,M as I,k as O,B as A,l as H,m as N,n as R,F as q,q as J,s as K,v as Q,x as X,y as Y,$ as Z,z as ee}from"./vendor-es.js";const L=c=>(P("data-v-45838999"),c=c(),T(),c),te={class:"home"},oe=L(()=>p("h1",null,"home page",-1)),ne=L(()=>p("br",null,null,-1)),se=$({__name:"index",setup(c){const n=g(0),t=k({nested:{count:0},arr:["foo","bar"]}),s=()=>{n.value++,t.nested.count+=2};return(a,d)=>(w(),y("div",te,[oe,p("div",{class:"count",id:"count",onClick:s},[S(" Click "),p("span",null,x(n.value),1),ne,p("span",null,x(t.nested.count),1)])]))}});const C=(c,n)=>{const t=c.__vccOpts||c;for(const[s,a]of n)t[s]=a;return t},ae=C(se,[["__scopeId","data-v-45838999"]]),ke=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"})),ce=c=>(P("data-v-bb7e5c32"),c=c(),T(),c),re={class:"webrtc-container"},le=ce(()=>p("div",{class:"local-video"},[p("video",{id:"localVideo",autoplay:"",playsinline:"",muted:""})],-1)),ie={class:"control"},de=$({__name:"record",setup(c){function n(l=t){const i=document.querySelector("#localVideo");i.srcObject=l,i.onloadedmetadata=()=>{i.play()}}let t;async function s(){t=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),n(),d.value=!0}function a(){t.getTracks().forEach(l=>{l.stop()}),d.value=!1}let d=g(!1);function b(){d.value?a():s()}async function r(){t=await navigator.mediaDevices.getDisplayMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0},video:{width:1920,height:1080,frameRate:60,aspectRatio:16/9}}),n()}const v=g(0);let e;function o(){if(!t){E.warning("请先获取本地音视频流");return}if((e==null?void 0:e.state)==="recording"){e.stop();return}const l={audioBitsPerSecond:128e3,videoBitsPerSecond:25e5,mimeType:'video/webm; codecs="vp8,opus"'},i=[];let _;e=new MediaRecorder(t,l),e.start(),e.ondataavailable=m=>{i.push(m.data)},e.onstart=()=>{_=setInterval(()=>{v.value++},1e3)},e.onstop=()=>{v.value=0,clearInterval(_);const m=new Blob(i,{type:e==null?void 0:e.mimeType});u(m),i.length=0}}function u(l){const i=URL.createObjectURL(l),_=document.createElement("a");_.href=i,_.download=`${new Date().getTime()}.${l.type.split("/")[1].split(";")[0]}`,_.click(),URL.revokeObjectURL(i)}return(l,i)=>{const _=j;return w(),y("div",re,[le,p("div",ie,[p("div",null,[f(_,{type:B(d)?"warning":"primary",onClick:b},{default:h(()=>[S(x(B(d)?"关闭摄像头":"打开摄像头"),1)]),_:1},8,["type"]),f(_,{type:"primary",onClick:r},{default:h(()=>[S("分享屏幕")]),_:1}),f(_,{type:v.value===0?"success":"warning",onClick:o},{default:h(()=>[S(x(v.value===0?" 开始录制":"终止录制 | "+v.value),1)]),_:1},8,["type"])])])])}}});const ue=C(de,[["__scopeId","data-v-bb7e5c32"]]),Ce=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"})),_e=$({__name:"FirstScene",setup(c){const n=g();function t(){var M;const s=new z,a=new G(45,window.innerWidth/window.innerHeight,.1,1e3),d=new V;d.setClearColor(new U(0)),d.setSize(window.innerWidth,window.innerHeight);const b=new D(20);s.add(b);const r=new W(60,20),v=new I({color:11184810}),e=new O(r,v);e.rotation.x=-.5*Math.PI,e.position.set(15,0,0),s.add(e);const o=new A(4,4,4),u=new I({color:16711680,wireframe:!0}),l=new O(o,u);l.position.set(-4,3,0),s.add(l);const i=new H(4,20,20),_=new I({color:7829503,wireframe:!0}),m=new O(i,_);m.position.set(20,4,2),s.add(m),a.position.set(-30,40,30),a.lookAt(s.position),(M=n.value)==null||M.appendChild(d.domElement),d.render(s,a)}return F(()=>{t()}),g("BasicSkeleton"),(s,a)=>(w(),y("div",{class:"three",ref_key:"threeRef",ref:n},null,512))}}),pe={style:{position:"absolute",top:"0"}},me=$({__name:"index",setup(c){return(n,t)=>(w(),y("div",pe,[f(_e)]))}}),Ie=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"})),ve={class:"ChatRoom"},fe={class:"wsMsg"},ge={id:"messages"},he=$({__name:"index",setup(c){const n=g(""),t=g(),s=(e,o,u)=>{if(o==="")return u(new Error("Please input the message"));setTimeout(()=>{u()},500)},a=k({message:""}),d=k({message:[{validator:s,trigger:"blur"}]}),b=e=>{e&&e.validate(o=>{var u;if(o&&r.value)r.value.emit("chat message",a.message),(u=t.value)==null||u.resetFields();else return console.log("error submit!"),!1})},r=g(),v=k({list:[]});return F(()=>{const e=window.location.hostname;r.value=N(`https://${e}:6789`),r.value.on("connect",()=>{var o,u;n.value=`用户ID: ${(o=r.value)==null?void 0:o.id}`,console.log((u=r.value)==null?void 0:u.id)}),r.value.on("connect_error",()=>{setTimeout(()=>{n.value="错误信息: Connect_Error"},2e3)}),r.value.on("disconnect",()=>{var o;console.log((o=r.value)==null?void 0:o.id)}),r.value.on("message",o=>{v.list.push(o)})}),R(()=>{r.value&&r.value.close()}),(e,o)=>{const u=X,l=Y,i=j,_=Q;return w(),y("div",ve,[p("div",fe,x(n.value),1),p("ul",ge,[(w(!0),y(q,null,J(v.list,(m,M)=>(w(),y("li",{key:M},x(m),1))),128))]),f(_,{ref_key:"wsFormRef",ref:t,model:a,"status-icon":"",rules:d,"label-width":"120px",class:"wsForm",size:"large",inline:!0,onSubmit:o[2]||(o[2]=K(()=>{},["prevent"]))},{default:h(()=>[f(l,{prop:"message",class:"message"},{default:h(()=>[f(u,{modelValue:a.message,"onUpdate:modelValue":o[0]||(o[0]=m=>a.message=m),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),f(l,{class:"sumbit"},{default:h(()=>[f(i,{type:"primary",onClick:o[1]||(o[1]=m=>b(t.value)),"native-type":"submit"},{default:h(()=>[S(" 发送 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}});const ye=C(he,[["__scopeId","data-v-39f7a668"]]),Oe=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"})),we={class:"peer"},be={class:"user-info"},xe={class:"user-info-id"},Se=$({__name:"index",setup(c){const n=g(""),t=g(new Z({host:"101.201.140.172",path:"peer",port:9011}));t.value.on("open",a=>{n.value=a}).on("disconnected",()=>{console.log("disconnected")});const s=()=>{ee.copy(n.value),E.success("复制成功")};return R(()=>{t.value.destroy()}),(a,d)=>{const b=j;return w(),y("div",we,[p("div",be,[p("div",xe,x(n.value),1),f(b,{type:"primary",onClick:s},{default:h(()=>[S("复制")]),_:1})])])}}});const $e=C(Se,[["__scopeId","data-v-296c0f18"]]),je=Object.freeze(Object.defineProperty({__proto__:null,default:$e},Symbol.toStringTag,{value:"Module"}));export{Ie as a,Oe as b,je as c,ke as i,Ce as r};
